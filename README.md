# 訂正依頼システム (App_request)

学校における出欠訂正・評価評定変更の依頼を管理するデスクトップアプリケーション

## 概要

**バージョン**: 1.2.0  
**開発言語**: Python 3.11  
**フレームワーク**: PySide6 (Qt for Python)  
**データベース**: SQLite

## 主な機能

### 📝 訂正入力
- 出欠訂正と評価評定変更の依頼を登録
- 組番号5文字対応（例: F1221）
- **NEW!** 出欠訂正時に学期を指定
- 出欠訂正時に校時を指定（最大2つ）
- **NEW!** 入力フォーム複製時に内容をそのまま複製
- **NEW!** ロックされていない訂正依頼の編集・削除
- 複数の訂正依頼を一括入力
- 確認ダイアログで内容を確認してから登録
- 色分けUI（出欠:薄緑、評価:薄オレンジ）

### 🔍 検索・フィルタ
- 生徒検索：氏名・組番号で部分一致検索
- 講座検索：講座名で部分一致検索
- リアルタイムフィルタリング
- ステータスと種別でのフィルタリング

### 🔧 システム部管理
- **NEW!** 訂正入力画面から認証ダイアログ表示
- パスワード保護された管理画面
- **NEW!** 訂正依頼のロック機能
- **NEW!** CSVエクスポート（UTF-8 BOM、文字化けなし）
- **NEW!** CSVインポート（差替え、文字化けなし）
- ロックされた訂正依頼の解除
- 操作ログの閲覧

### 📊 その他の機能
- 訂正依頼のフィルタリング（ステータス、種別）
- 自動ログ記録（作成・更新・削除・ロック操作）
- PCユーザー名とPC名の自動記録
- 依頼者名の必須化

## システム要件

- **OS**: Windows 10/11, macOS 10.15+
- **Python**: 3.11以上
- **必要なパッケージ**: requirements.txt 参照

## インストール

### 開発環境

```bash
# リポジトリをクローン
git clone https://github.com/seyaytua/request.git
cd request

# 仮想環境を作成
python3.11 -m venv venv

# 仮想環境を有効化
# macOS/Linux:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# 依存パッケージをインストール
pip install -r requirements.txt
実行
Copypython main.py
実行ファイル化（Windows用）
Copypyinstaller --onefile --windowed --name="訂正依頼システム" main.py
使い方
訂正依頼の登録
「訂正入力」タブを開く
右側の入力フォームに情報を入力
依頼種別（出欠訂正 / 評価評定変更）
生徒選択（検索可能）
講座選択（検索可能）
NEW! 出欠訂正の場合：学期と校時を選択
訂正内容と理由
「確認して登録」ボタンをクリック
確認ダイアログで内容を確認
「登録」をクリックして完了
訂正依頼の編集・削除
リストから編集・削除したい依頼を選択
「✏️ 編集」または「🗑️ 削除」ボタンをクリック
⚠️ ロックされた依頼は編集・削除できません
システム部管理
「システム部管理」タブをクリック
パスワードを入力（初期: admin123）
認証成功後、管理画面が表示されます
以下の操作が可能：
🔒 訂正依頼のロック
🔓 ロック解除
📤 CSVエクスポート
📥 CSVインポート
📊 操作ログ閲覧
データベース
SQLiteを使用。初回起動時に自動的に作成されます。

テーブル構成
students - 生徒情報（組番号5文字対応）
courses - 講座情報
correction_requests - 訂正依頼（学期・校時フィールド追加）
operation_logs - 操作ログ
system_settings - システム設定
更新履歴
v1.2.0 (2024-10-18)
✨ 出欠訂正に学期フィールド追加
✨ 学期選択肢を拡充（1学期/2学期/3学期を追加）
✨ 入力フォーム複製時に内容をそのまま複製
✨ 一般ユーザーによる編集・削除機能（ロックされていない依頼のみ）
✨ システム部管理でロック機能を追加
✨ CSVエクスポート機能（UTF-8 BOM、文字化けなし）
✨ CSVインポート機能（差替え、文字化けなし）
🎨 認証画面を訂正入力画面上に表示
🎨 アプリタイトルからバージョン表記を削除
📝 設計書の更新
v1.1.0 (2024-10-17)
✨ 組番号を5文字に拡張
✨ 出欠訂正に校時フィールド追加
✨ 依頼者名を必須項目に変更
🎨 訂正入力画面に色分け追加
🔍 生徒・講座の検索機能強化
v1.0.0 (2024-10-17)
🎉 初回リリース
ライセンス
このプロジェクトは教育目的で作成されています。

開発者
開発: seyaytua
